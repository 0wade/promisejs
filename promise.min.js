var promise=(function(){function a(a,b){return function(){return a.apply(b,arguments);};}function b(){this._callbacks=[];}b.prototype.then=function(b,c){var d=a(b,c);if(this._isdone)d(this.result,this.error);else this._callbacks.push(d);return this;};b.prototype.done=function(a,b){this._isdone=true;this.result=a;this.error=b;for(var c=0;c<this._callbacks.length;c++)this._callbacks[c](a,b);this._callbacks=[];};function c(a){var c=a.length;var d=0;var e=new b();function f(){d+=1;if(d===c)e.done();}for(var g=0;g<c;g++)a[g]().then(f);return e;}function d(a,c,e){var f=new b();if(a.length===0)f.done(c,e);else a[0](c,e).then(function(b,c){a.splice(0,1);d(a,b,c).then(function(a,b){f.done(a,b);});});return f;}function e(a,c,d){d=d||{};var e=new b();var f;if(window.XMLHttpRequest)f=new XMLHttpRequest();else if(window.ActiveXObject)try{f=new ActiveXObject("Msxml2.XMLHTTP");}catch(g){try{f=new ActiveXObject("Microsoft.XMLHTTP");}catch(g){}}if(!f)e.done("",-1);f.onreadystatechange=function(){if(f.readyState===4)if(f.status===200)e.done(f.responseText);else e.done("",f.status);};f.open(a,c);f.send();return e;}function f(a){return function(b,c){return e(a,b,c);};}var g={Promise:b,join:c,chain:d,ajax:e,get:f('GET'),post:f('POST'),put:f('PUT'),delete:f('DELETE')};return g;})();
