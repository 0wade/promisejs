var promise=(function(){function a(a,b){return function(){return a.apply(b,arguments);};}function b(){this._callbacks=[];}b.prototype.then=function(b,c){var d=a(b,c);if(this._isdone)d(this.result,this.error);else this._callbacks.push(d);return this;};b.prototype.done=function(a,b){this._isdone=true;this.result=a;this.error=b;for(var c=0;c<this._callbacks.length;c++)this._callbacks[c](a,b);this._callbacks=[];};function c(a){var c=a.length;var d=0;var e=new b();var f=[];var g=[];function h(a){return function(b,h){d+=1;f[a]=b;g[a]=h;if(d===c)e.done(f,g);};}for(var i=0;i<c;i++)a[i]().then(h(i));return e;}function d(a,c,e){var f=new b();if(a.length===0)f.done(c,e);else a[0](c,e).then(function(b,c){a.splice(0,1);d(a,b,c).then(function(a,b){f.done(a,b);});});return f;}function e(a){var b="";if(typeof a==="string")b=a;else for(var c in a)if(a.hasOwnProperty(c)){var d=encodeURIComponent;b+='&'+d(c)+'='+d(a[c]);}return b;}function f(){var a;if(window.XMLHttpRequest)a=new XMLHttpRequest();else if(window.ActiveXObject)try{a=new ActiveXObject("Msxml2.XMLHTTP");}catch(b){a=new ActiveXObject("Microsoft.XMLHTTP");}return a;}function g(a,c,d,g){var h=new b();var i,j;d=d||{};g=g||{};try{i=f();}catch(k){h.done("",-1);return h;}j=e(d);if(a==='GET'&&j){c+='?'+j;j=null;}i.open(a,c);i.setRequestHeader('Content-type','application/x-www-form-urlencoded');i.setRequestHeader('X-Requested-With','XMLHttpRequest');for(var l in g)if(g.hasOwnProperty(l))i.setRequestHeader(l,g[l]);i.onreadystatechange=function(){if(i.readyState===4)if(i.status===200)h.done(i.responseText);else h.done("",i.status);};i.send(j);return h;}function h(a){return function(b,c,d){return g(a,b,c,d);};}var i={Promise:b,join:c,chain:d,ajax:g,get:h('GET'),post:h('POST'),put:h('PUT'),delet:h('DELETE')};return i;})();